<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pincer | Login</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/loginstyle.css') }}">
</head>
<body>
    <div class="login-container">
        <h1>Login/Register</h1>
        <form id="login-form">
            <input type="email" id="email" name="email" placeholder="Enter your email" required>
            <input type="password" id="password" name="pass" placeholder="Enter your password" required>
            <button type="submit">LOGIN/REGISTER</button>
        </form>
        <a href="#" id="google-login" class="google-login">
            <img src="data:image/png;base64,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" alt="Google Logo">
            Login by Google
        </a>
        <p id="warning" class="warning"></p>
    </div>

    <script>
        document.getElementById('login-form').addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent default form submission

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            const au = await fetch(`/auth/login?email=${encodeURIComponent(email)}&pass=${encodeURIComponent(password)}`);

            if (au.status == 344) {
                alert(await au.text());
            }else if (au.status == 522){}
            else{
            
            const response = await fetch('/auth/confirm');
                
                if (response.status === 401) {
                    data=await response.json();
                    document.getElementById('warning').textContent = data.message;
                } else if (response.ok) {
                    window.location.href = response.url; // Follow the redirect
                } 
                else {
                    document.getElementById('warning').textContent = 'An unexpected error occurred. Please try again later.';
                }
            
        }});

        document.getElementById('google-login').addEventListener('click', function () {
            window.location.href = '/auth/loginbygoogle'; // Redirect to Google login
        });
    </script>
</body>
</html>
